---
title: 前端工程师全栈之路（1）- 从开发到发布
date: 2019-03-14 15:01:08
tags:
---

![封面](4845c3423f7c9ec13e8d0150ce2bb2be.png)
<!--less-->

## 神一样的男人：全栈工程师

全栈工程师，这个词我其实是不太赞同的，但很多人对这个词趋之若鹜，业内也逐渐出现了对全栈工程师的招聘需求。

但是不论招聘需求，还有对于全栈的定义都是比较模糊的，依然没有定论。

从现在各种招聘需求，及各大网站推出的全栈工程师的教程目录来看，目前对于全栈工程师的要求并不高，甚至真的像调侃所说的那样：“会一门前端语言，会一门服务端语言，就可以称之为全栈了”。

随着目前技术飞速的发展，互联网应用的架构日趋复杂，一个人是很难精通所有领域的，但是如果只是开发一些小型应用，应对不多的流量，再从成本角度上考虑，一个工程师借助一些开源的软件和工具，也是可以办得到的。

所以我这里不推崇全栈，但是在平时的工作学习中，对技术有更全面的积累还是很有必要的。

so，以上的标题 “前端工程师全栈之路” 系列，会逐渐向大家介绍一些 “前端”，在互联网应用开发的整个过程中的应用经验。

## 缘起一次个人小挑战

做了4年前端开发，1年JAVA开发，大大小小的项目，从服务端，服务器，web前端，hybrid App，各种应用也做了很多。

作为开发者大家普遍都有一些想做点小东西的想法，作为前端工程师的我更是经常有！！但麻雀虽小五脏俱全，需要我们对服务器、前端、服务端、数据库、均有一些了解方可成型。

当如今 nodejs 也比较成熟了，作为前端开发工程师，能不能从现有的开源软件和工具上搭出一套，集成开发环境、生产环境、自动部署发布的一套架子，自己从0开始用最快的速度搭建出来需要多久？

## 从生产到开发？还是从开发到生产?

这个问题让我思考了半天，主要是从最终生产部署考虑的，起初我是想起一个进程，nginx 做转发，nodejs 做容器来提供静态资源和api数据服务。

后经过反复思考，相对于我想做的传统web服务，最终决定还是拆成两个服务。
* 虽然在部署上后稍微麻烦一些，但以服务这个角度来看这样的结果会更加灵活。
* 可以有效的将静态资源和api数据服务解耦。
* 从微服务和多服务的角度来考虑，也是趋势。

### 服务器描述
1. nginx 做统一代理转发
2. 前端部署在 8000+ 端口，用 serve 做静态资源服务
3. 服务部署在 3000+ 端口，用 nodejs

### 前端描述
1. create-react-app

### 服务端描述
1. nodejs 搭建 server 服务

### 项目目录设计
1. create-react-app 初始化目录
2. server 文件夹内独立管理服务端代码编译打包开发相关
> 第一版先采用嵌套的形式

### 原则
1. 能自动化的绝对不手动

### create-react-app
```sh
    npx create-react-app your-project-name
    cd your-project-name
    yarn start
```
> npx 命令可以不用安装直接使用

#### antd + 改写配置

    config-overrides.js

#### dev, build, start 命令配置

### server

#### npm init

#### dev, build, start 命令配置

### 服务器配置

#### 服务器免密登陆

    ssh-copy-id -i ~/.ssh/id_rsa.pub root@47.95.7.29

    退出重连接

#### nvm

#### node

    用 nvm 安装 node（相信我 这么做最省事）

#### yarn

#### git

    项目 deploy-key 免密拉取代码

    ssh-keygen -t rsa -b 4096 -C "your_email@example.com"

    cat ~/.ssh/id_rsa.pub

#### nginx

    yum 安装

    nginx 配置

#### pm2

    pm2 deploy

    ecosystem.config.js

#### 提交代码

#### 发布上线

#### 查看结果&验证






